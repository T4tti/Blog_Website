<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../CSS/login.css" />
  <title>VietTechBlog - Login</title>
  <link rel="icon" type="image/png" href="../Assets/favicon-32x32.png" sizes="32x32" />

</head>

<body>
  <div class="background"></div>
  <div class="login-container">
    <div class="logo">
      <img src="../Assets/ms-icon-70x70.png" alt="VietTechBlog Logo" />
    </div>
    <h1>Đăng nhập vào VietTechBlog</h1>
    <form id="frmLogin" method="post" action="../PHP/process_login.php" novalidate>
      <div id="error-login" class="error" role="alert" aria-live="polite"></div>

      <div class="input-group">
        <div class="input-wrapper">
          <img src="../Assets/user-filled-svgrepo-com.svg" class="img-icon" alt="" aria-hidden="true" />
          <input id="username" name="username" type="text" placeholder="Tên người dùng hoặc email"
            autocomplete="username" required aria-required="true" aria-describedby="error-username" />
        </div>
        <div id="error-username" class="error" role="alert" aria-live="polite">
          Tên người dùng/email là bắt buộc
        </div>
      </div>

      <div class="input-group">
        <div class="input-wrapper">
          <img src="../Assets/lock-svgrepo-com.svg" class="img-icon" alt="" aria-hidden="true" />
          <input id="pwd" name="password" type="password" placeholder="Mật khẩu" autocomplete="current-password"
            required aria-required="true" aria-describedby="error-pwd" />
          <button type="button" class="toggle-password" aria-label="Hiển thị mật khẩu">
            <svg id="eye-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
              fill="currentColor">
              <path
                d="M12 4.5C7.5 4.5 3.73 7.11 2 12c1.73 4.89 5.5 7.5 10 7.5s8.27-2.61 10-7.5c-1.73-4.89-5.5-7.5-10-7.5zm0 12c-2.49 0-4.5-2.01-4.5-4.5s2.01-4.5 4.5-4.5 4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-7c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5z">
              </path>
            </svg>
          </button>
        </div>
        <div id="error-pwd" class="error" role="alert" aria-live="polite">
          Mật khẩu là bắt buộc
        </div>
      </div>

      <button type="submit" class="login-button">Đăng nhập</button>

      <div class="footer-links">
        <a href="quenmk.html">Quên mật khẩu?</a>
        <a href="register.html">Tạo tài khoản</a>
      </div>
    </form>

    <div class="social-login">
      <div class="social-login-text"><span>Đăng nhập bằng</span></div>
      <div class="social-buttons">
        <button class="social-button social-facebook">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path fill="#4267B2"
              d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z" />
          </svg>
          Facebook
        </button>
        <button class="social-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20px" height="20px">
            <path fill="#fbc02d"
              d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12	s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20	s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z" />
            <path fill="#e53935"
              d="M6.306,14.691l6.571,4.819C14.655,15 ```html
.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z" />
            <path fill="#4caf50"
              d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z" />
            <path fill="#1565c0"
              d="M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z" />
          </svg>
          Google
        </button>
        <button class="social-button">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path fill="#333"
              d="M12 2A10 10 0 0 0 2 12C2 16.42 4.87 20.17 8.84 21.5C9.34 21.58 9.5 21.27 9.5 21C9.5 20.77 9.5 20.14 9.5 19.31C6.73 19.91 6.14 17.97 6.14 17.97C5.68 16.81 5.03 16.5 5.03 16.5C4.12 15.88 5.1 15.9 5.1 15.9C6.1 15.97 6.63 16.93 6.63 16.93C7.5 18.45 8.97 18 9.54 17.76C9.63 17.11 9.89 16.67 10.17 16.42C7.95 16.17 5.62 15.31 5.62 11.5C5.62 10.39 6 9.5 6.65 8.79C6.55 8.54 6.2 7.5 6.75 6.15C6.75 6.15 7.59 5.88 9.5 7.17C10.29 6.95 11.15 6.84 12 6.84C12.85 6.84 13.71 6.95 14.5 7.17C16.41 5.88 17.25 6.15 17.25 6.15C17.8 7.5 17.45 8.54 17.35 8.79C18 9.5 18.38 10.39 18.38 11.5C18.38 15.32 16.04 16.16 13.81 16.41C14.17 16.72 14.5 17.33 14.5 18.26C14.5 19.6 14.5 20.68 14.5 21C14.5 21.27 14.66 21.59 15.17 21.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z" />
          </svg>
          Github
        </button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const frmLogin = document.getElementById("frmLogin");
      const username = document.getElementById("username");
      const password = document.getElementById("pwd");
      const errorLogin = document.getElementById("error-login");
      const usernameError = document.getElementById("error-username");
      const passwordError = document.getElementById("error-pwd");

      // Toggle password visibility
      document.querySelector(".toggle-password").addEventListener("click", () => {
        password.type = password.type === "password" ? "text" : "password";

        const eyeIcon = document.getElementById("eye-icon");
        eyeIcon.innerHTML =
          password.type === "password"
            ? '<path d="M12 4.5C7.5 4.5 3.73 7.11 2 12c1.73 4.89 5.5 7.5 10 7.5s8.27-2.61 10-7.5c-1.73-4.89-5.5-7.5-10-7.5zm0 12c-2.49 0-4.5-2.01-4.5-4.5s2.01-4.5 4.5-4.5 4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-7c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5z"/>'
            : '<path d="M12 4.5C7.5 4.5 3.73 7.11 2 12c.85 2.41 2.31 4.44 4.22 5.88L3 21l1.5 1.5 18-18L20.5 1.5 15.2 6.8C14.11 6.3 13.07 6 12 6c-2.49 0-4.5 2.01-4.5 4.5S9.51 15 12 15c.77 0 1.49-.2 2.13-.54L12 18c-3.31 0-6-2.69-6-6 0-3.31 2.69-6 6-6 .39 0 .76.05 1.13.13L9.5 7.5C9.19 7.19 9 7 9 7 7.67 7 6.5 8.17 6.5 9.5 6.5 10.28 6.86 11 7.5 11.5 7.65 11.88 7.5 12 7.5 12s0 0 0 0h1c0 .5-.25.75-.5.75H8L12 14.5c.5 0 1-.25 1.5-.75H13l1.5-1.5H12l1.5-1.5h2l-1.25 1.25 5.5-5.5c-.47-.36-.99-.66-1.53-.88z"/>';
      });
      errorLogin.style.display = "none";
      usernameError.style.display = "none";
      passwordError.style.display = "none";

      frmLogin.addEventListener("submit", (event) => {
        if (!username.value.trim()) {
          usernameError.style.display = "block";
          username.parentElement.classList.add("invalid");
          event.preventDefault();
        }
        if (!password.value.trim()) {
          passwordError.style.display = "block";
          password.parentElement.classList.add("invalid");
          event.preventDefault();
        }
      });
      // Show server-side error
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has("pwd-error")) {
        passwordError.textContent = urlParams.get("pwd-error");
        passwordError.style.display = "block";
      }
      const loginError = urlParams.get("error");
      if (loginError) {
        errorLogin.textContent = loginError;
        errorLogin.style.display = "block";
      }
    });

    window.onload = function () {
      const urlParams = new URLSearchParams(window.location.search);

      // Kiểm tra nếu có bất kỳ query parameters nào
      if (urlParams.toString()) {
        // Xóa tất cả query parameters
        window.history.replaceState(null, '', window.location.pathname);
      }
    };
  </script>
</body>

</html>